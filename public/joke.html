<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Joke</title>
  <link rel="stylesheet" href="style.css">
</head>
<body data-page="joke">
 
<header>
    
  <nav>
    <a href="index.html" class="nav-link">Home</a>
    <a href="about.html" class="nav-link">About</a>
    <a href="goals.html" class="nav-link">Goals</a>
    <a href="joke.html" class="nav-link">Joke</a>
  </nav>

  <button id="burger" aria-label="Open menu">☰</button>

</header>

  <main>
    <section class="chat-section">
      <h1>Coolbash</h1>
      <div id="chat-window" style="border:1px solid #ccc; padding:10px; height:300px; overflow-y:auto; background:#f9f9f9;"></div>
      <form id="chat-form" style="margin-top:10px;">
        <input type="text" id="user-input" placeholder="Type your message..." style="width:80%; padding:8px;" required>
        <button type="submit">Send</button>
      </form>
    </section>
  </main>

  <script>
    const form = document.getElementById('chat-form');
    const input = document.getElementById('user-input');
    const chatWindow = document.getElementById('chat-window');

    form.addEventListener('submit', async (e) => {
      e.preventDefault();
      const userMessage = input.value.trim();
      if(!userMessage) return;

      // Добавляем сообщение пользователя
      const userDiv = document.createElement('div');
      userDiv.textContent = 'You: ' + userMessage;
      chatWindow.appendChild(userDiv);
      chatWindow.scrollTop = chatWindow.scrollHeight;
      input.value = '';

      try {
        // Отправка на сервер
        const res = await fetch('http://localhost:3000/ai', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ message: userMessage })
        });
        const data = await res.json();

        // Добавляем ответ ИИ
        const aiDiv = document.createElement('div');
        aiDiv.textContent = 'AI: ' + data.reply;
        aiDiv.style.color = '#ff4466';
        chatWindow.appendChild(aiDiv);
        chatWindow.scrollTop = chatWindow.scrollHeight;
      } catch (err) {
        console.error(err);
      }
    });
  </script>

  <button id="theme-toggle" aria-label="Toggle theme">☀️</button>

  <script src="script.js"></script>

</body>

</html>